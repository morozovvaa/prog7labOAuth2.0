# –û—Ç—á–µ—Ç –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è OAuth 2.0 (Authorization Code Flow)

---

## 1. –¶–µ–ª–∏ –†–∞–±–æ—Ç—ã

1. –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ä–æ–ª—è–º–∏ –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ **OAuth 2.0**.
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫ **Authorization Code Flow** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Python –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `requests-oauthlib`.
3. –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∏—Ç—å **Access Token** –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É (GitHub API).

---

## 2. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –°–≤–µ–¥–µ–Ω–∏—è

**OAuth 2.0** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é (–ö–ª–∏–µ–Ω—Ç—É) –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Resource Owner) –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –≤–≤–æ–¥–∞ –µ–≥–æ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è.

**–ö–ª—é—á–µ–≤—ã–µ —Ä–æ–ª–∏:**
* **Resource Owner:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –≤–ª–∞–¥–µ—é—â–∏–π –¥–∞–Ω–Ω—ã–º–∏.
* **Client:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—â–µ–µ –¥–æ—Å—Ç—É–ø.
* **Authorization Server:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã.
* **Resource Server:** –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç Access Token.

**Authorization Code Flow:** –°–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ—Ç–æ–∫, –≥–¥–µ –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π **–ö–æ–¥ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä, –∞ –∑–∞—Ç–µ–º –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç –µ–≥–æ –Ω–∞ **Access Token** —á–µ—Ä–µ–∑ **–∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** (back-channel).

---

## 3. –•–æ–¥ –†–∞–±–æ—Ç—ã –∏ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 3.1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Python –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `requests-oauthlib`. –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (`CLIENT_ID` –∏ `CLIENT_SECRET`) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
2.  **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è URI:** –î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É OAuth 2.0 (MUST utilize HTTPS) –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–ª–µ–¥—É—é—â–∏–π URI: `REDIRECT_URI = "https://localhost:8000/callback"`.

<img width="669" height="494" alt="image" src="https://github.com/user-attachments/assets/f23df679-51c3-4d82-bd66-8387dde1c8d6" />


### 3.2. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Authorization Code Flow

–ü—Ä–æ—Ü–µ—Å—Å –±—ã–ª –∑–∞–ø—É—â–µ–Ω —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞ `oauth_client.py`.

| –≠—Ç–∞–ø | –í—ã–≤–æ–¥ –ö–æ–Ω—Å–æ–ª–∏ –∏ –î–µ–π—Å—Ç–≤–∏–µ | –í—ã–≤–æ–¥ –∏ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
| :--- | :--- | :--- |
| **–®–∞–≥ 1: –ó–∞–ø—Ä–æ—Å –∫–æ–¥–∞** | –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π `client_id` –∏ `state`. | URL: `https://github.com/login/oauth/authorize?response_type=code&client_id=...&redirect_uri=https%3A%2F%2Flocalhost%3A8000%2Fcallback...`|
| **–®–∞–≥ 2: –°–æ–≥–ª–∞—Å–∏–µ** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ URL –∏ –Ω–∞–∂–∏–º–∞–µ—Ç **"Authorize"** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ–≥–ª–∞—Å–∏—è GitHub, –¥–µ–ª–µ–≥–∏—Ä—É—è –ø—Ä–∞–≤–∞ `read:user`. | **[–í—Å—Ç–∞–≤—å—Ç–µ –°–∫—Ä–∏–Ω—à–æ—Ç 3: –û–∫–Ω–æ —Å–æ–≥–ª–∞—Å–∏—è]** *(–°–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã GitHub —Å –∑–∞–ø—Ä–æ—Å–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π.)* |

**–°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±–º–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–∞:**
<img width="974" height="488" alt="image" src="https://github.com/user-attachments/assets/854b8d3b-8cd7-4da1-beaa-dd5704b8b3ff" />

<img width="1378" height="701" alt="image" src="https://github.com/user-attachments/assets/e40f744e-42ee-4981-94aa-3e44c462ae8e" />


---
## 4. –û—Ç–≤–µ—Ç—ã –Ω–∞ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –í–æ–ø—Ä–æ—Å—ã

### 1. –†–æ–ª–∏ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ OAuth 2.0
–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ–ª–∏:
* **Resource Owner** (–í–ª–∞–¥–µ–ª–µ—Ü –†–µ—Å—É—Ä—Å–∞): –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –æ–±–ª–∞–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ –∏ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.
* **Client** (–ö–ª–∏–µ–Ω—Ç): –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—â–µ–µ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* **Authorization Server** (–°–µ—Ä–≤–µ—Ä –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏): –°–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã.
* **Resource Server** (–°–µ—Ä–≤–µ—Ä –†–µ—Å—É—Ä—Å–æ–≤): –°–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞–ª–∏–¥–Ω–æ–≥–æ Access Token.

### 2. –ß—Ç–æ —Ç–∞–∫–æ–µ Authorization Code –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?
**Authorization Code** ‚Äî —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∫–æ–¥, –≤—ã–¥–∞–≤–∞–µ–º—ã–π –°–µ—Ä–≤–µ—Ä–æ–º –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞** –Ω–∞ **Access Token** —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (back-channel), —á—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —Å–∞–º–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –≤ –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ (front-channel).

### 3. –ü–æ—á–µ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä state –≤–∞–∂–µ–Ω –≤ –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é?
–ü–∞—Ä–∞–º–µ—Ç—Ä **`state`** –≤–∞–∂–µ–Ω –¥–ª—è **–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è CSRF-–∞—Ç–∞–∫** (Cross-Site Request Forgery). –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `state` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∑–∞–ø—Ä–æ—Å–µ. –°–µ—Ä–≤–µ—Ä –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –ö–ª–∏–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∫–æ–¥–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É –∑–∞–ø—Ä–æ—Å—É, –∏ –Ω–µ –±—ã–ª –ø–æ–¥–¥–µ–ª–∞–Ω –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–º.

### 4. –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Authorization Code Flow –æ—Ç Client Credentials Flow?
| –ü–æ—Ç–æ–∫ | –¶–µ–ª—å | –£—á–∞—Å—Ç–∏–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| :--- | :--- | :--- |
| **Authorization Code** | –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ **—Ä–µ—Å—É—Ä—Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**. | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å–æ–≥–ª–∞—Å–∏–µ). |
| **Client Credentials** | –î–æ—Å—Ç—É–ø –∫ **—Ä–µ—Å—É—Ä—Å–∞–º —Å–∞–º–æ–≥–æ –ö–ª–∏–µ–Ω—Ç–∞** (—Å–µ—Ä–≤–∏—Å-–≤-—Å–µ—Ä–≤–∏—Å). | **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**. |

### 5. –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è refresh token –∏ –∫–∞–∫–æ–≤–∞ –µ–≥–æ —Ä–æ–ª—å?
**Refresh Token** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ **Access Token –∏—Å—Ç–µ–∫–∞–µ—Ç** (–æ–±—ã—á–Ω–æ —á–µ—Ä–µ–∑ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏). –ï–≥–æ —Ä–æ–ª—å ‚Äî –ø–æ–∑–≤–æ–ª–∏—Ç—å –ö–ª–∏–µ–Ω—Ç—É –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π **Access Token** –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–≤–æ–¥–∏—Ç—å —Å–≤–æ–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

---
## 6. –ó–∞–¥–∞–Ω–∏–µ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¢–æ–∫–µ–Ω–∞ (Refresh Token)

–¶–µ–ª—å—é –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–ª—É—á–µ–Ω–∏—è **Refresh Token** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ API Google, –Ω–µ —Ç—Ä–µ–±—É—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è **Access Token**.

### 6.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ö–ª—é—á–µ–≤–æ–π –ü–∞—Ä–∞–º–µ—Ç—Ä

1.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –ë—ã–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Google Auth (`google-auth-oauthlib`) –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–æ–≤–æ–µ OAuth-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Google Cloud Console (–ø—Ä–æ–µ–∫—Ç **My Project 45304**).
2.  **–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:** –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Refresh Token –≤ URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±—ã–ª —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä: `access_type='offline'`.

### 6.2. –•–æ–¥ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ `diamorozov@gmail.com` –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏), –ø–æ—Ç–æ–∫ –±—ã–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω:

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ –î–µ–π—Å—Ç–≤–∏–π |
| :--- | :--- |
| **–ó–∞–ø—Ä–æ—Å URL** | –°–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `access_type=offline` –∏ `scope=photoslibrary.readonly`. |
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–≥–ª–∞—Å–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é **"Refresh Token Lab"**. |
| **–û–±–º–µ–Ω –Ω–∞ —Ç–æ–∫–µ–Ω—ã** | URL –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ–±–º–µ–Ω–∞ –Ω–∞ —Ç–æ–∫–µ–Ω—ã. |

**–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±–º–µ–Ω–∞ —Ç–æ–∫–µ–Ω–∞–º–∏ (JSON-–æ—Ç–≤–µ—Ç):**

<img width="974" height="486" alt="image" src="https://github.com/user-attachments/assets/9d4c0ecc-84a3-4647-a86a-db71cc7a68b9" />


```
(.venv) PS C:\Users\diamo\PycharmProjects\oauth> python google_refresh_token.py
--- –®–∞–≥ 1: –ó–∞–ø—Ä–æ—Å –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ---
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ, —á—Ç–æ–±—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø:
https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=64408650301-92ce99bdav1ehep7q5pb54eeocqlf1oi.apps.googleusercontent.com&redirect_uri=https%3A%2F%2Flocalhost%
3A8080%2Fauth%2Fgoogle%2Fcallback&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fphotoslibrary.readonly&state=XpWVXu69UQObcouDuPSECLHUk5zukc&access_type=offline&include_granted_scopes=true

--- –®–∞–≥ 2: –í–≤–æ–¥ –∫–æ–¥–∞ ---
2. –í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–Ω—ã–π URL –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ code –∏ state): https://localhost:8080/auth/google/callback?state=XpWVXu69UQObcouDuPSECLHUk5zukc&code=4/0AVGzR1DOHvFOJNEX6AYl1OBR41vuUIBMMG24Ae1GUZ71xUXaQhCOgYp9w4OMf0IByVbPGA&scope=https://www.googleapis.com/auth/photoslibrary.readonly

‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã —Ç–æ–∫–µ–Ω—ã:
{
  "token": "ya29.a0ATi6K2vNDlNQA3WXDEOm63...",
  "refresh_token": "1//0cYkr3jZfNtUfCgYIARAAGAw...",
  "token_uri": "https://oauth2.googleapis.com/token",
  "client_id": "64408650301-92ce99bdav1ehep7q5pb54eeocqlf1oi.apps.googleusercontent.com",
  "client_secret": "....",
  "scopes": [
    "https://www.googleapis.com/auth/photoslibrary.readonly"
  ],
  "universe_domain": "googleapis.com",
  "account": "",
  "expiry": "2025-10-25T15:21:02Z"
}

üí° Refresh Token —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Access Token.

```

### 6.3. –í—ã–≤–æ–¥ –ø–æ Refresh Token

1.  **–ü–æ–ª—É—á–µ–Ω–∏–µ:** –£—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—è **`"refresh_token"`** –≤ –æ—Ç–≤–µ—Ç–µ JSON –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **–∫–ª—é—á–µ–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `access_type='offline'`** –≤ –∑–∞–ø—Ä–æ—Å–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
2.  **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –Ω–æ–≤–æ–≥–æ **Access Token** –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ: `expiry: 2025-10-25T15:21:02Z`). –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—É—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ **POST-–∑–∞–ø—Ä–æ—Å–∞** —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º **`grant_type=refresh_token`**.
3.  **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü–æ–ª—É—á–µ–Ω–Ω—ã–π Refresh Token, –Ω–∞—Ä—è–¥—É —Å Client Secret, —è–≤–ª—è–µ—Ç—Å—è **–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º —Å–µ–∫—Ä–µ—Ç–æ–º**. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—ç—Ç–æ–º—É –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ** –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –ö–ª–∏–µ–Ω—Ç–∞ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.
